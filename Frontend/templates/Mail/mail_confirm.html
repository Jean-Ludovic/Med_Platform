<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Confirmation de Code</title>
</head>
<body>

    
    <p>Entrez le code à 4 chiffres que nous avons envoyé à votre adresse email.</p>
    
    <form id="confirmationForm" action="javascript:void(0);" autocomplete="off">
        <label for="confirmation_code">Code de confirmation :</label>
        <input type="text" name="confirmation_code" id="confirmation_code" maxlength="4" required>
        <button type="button" id="confirmButton">Confirmer</button>
    </form>

    <script>
        // Récupère le code de confirmation généré côté serveur
        const confirmationCode = "{{ confirmation_code }}";

        document.getElementById('confirmButton').addEventListener('click', function() {
            // Récupère le code saisi par l'utilisateur
            const userInputCode = document.getElementById('confirmation_code').value;

            // Affiche le code de confirmation dans la console pour débogage
            console.log("Code de confirmation côté serveur :", confirmationCode);
            console.log("Code saisi par l'utilisateur :", userInputCode);

            // Vérifie si le code saisi est correct
            if (userInputCode === confirmationCode) {
                console.log("Code correct ! Redirection vers la page de création de profil.");
                window.location.href = "{% url 'create_profile' %}";  // Redirige vers create_profile
            } else {
                console.log("Code incorrect. Veuillez réessayer.");
                alert("Le code saisi est incorrect. Veuillez réessayer.");
            }
        });
    </script>

</body>
</html>
