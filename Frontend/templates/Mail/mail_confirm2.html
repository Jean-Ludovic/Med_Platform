<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Vérification de Code</title>
</head>
<body>
    <h2>Veuillez entrer le code reçu par e-mail</h2>
    <form id="codeForm">
        <label for="code">Code :</label>
        <input type="text" id="code" maxlength="4" required>
        <button type="button" onclick="verifyCode()">Vérifier</button>
    </form>
    <p id="message"></p>

    <script>
        // Code généré côté serveur (inséré dynamiquement par Django)
        const correctCode = "{{ confirmation_code }}";  // Convertit le code en chaîne
        const redirectUrl = "/profile-form";  // URL de redirection en cas de succès

        console.log("Code généré côté serveur : ", correctCode); // Affiche le code côté serveur pour vérification

        function verifyCode() {
            const codeInput = document.getElementById("code").value;

            console.log("Code entré par l'utilisateur : ", codeInput); // Affiche le code entré pour comparaison

            if (codeInput === correctCode) {
                // Redirection si le code est correct
                window.location.href = redirectUrl;
            } else {
                // Message d'erreur si le code est incorrect
                document.getElementById("message").textContent = "Code incorrect, veuillez réessayer.";
                document.getElementById("message").style.color = "red";
            }
        }
    </script>
</body>
</html>
